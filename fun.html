<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Time ğŸ’™</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="page-fun">
    
    <div class="music-control" id="musicControl">
        <button id="musicToggle" class="music-btn" data-testid="music-toggle-btn">
            <span id="musicIcon">ğŸ”Š</span>
        </button>
    </div>

    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo" data-testid="nav-home">ğŸ’™ Lixie</a>
            <div class="nav-links">
                <a href="about.html" class="nav-link" data-testid="nav-about">Tentang</a>
                <a href="story.html" class="nav-link" data-testid="nav-story">Cerita</a>
                <a href="letter.html" class="nav-link" data-testid="nav-letter">Surat</a>
                <a href="future.html" class="nav-link" data-testid="nav-future">Masa Depan</a>
                <a href="fun.html" class="nav-link active" data-testid="nav-fun">Fun</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="content-wrapper" data-testid="fun-content">
            
            <div class="fun-section fade-in">
                <h2 class="fun-title">Acak Kenangan Kita</h2>
                <p class="fun-subtitle">Klik tombol di bawah untuk melihat kenangan random</p>
                <button class="btn-shuffle" onclick="shuffleMemory()" data-testid="shuffle-memory-btn">
                    ğŸ”€ Acak Kenangan
                </button>
                <div id="memoryDisplay" class="memory-display" data-testid="memory-display"></div>
            </div>

            <div class="fun-section fade-in-delay">
                <h2 class="fun-title-big" data-testid="love-question">Kamu Sayang Aku Ga?</h2>
                <div class="love-buttons" id="loveButtons">
                    <button class="btn-yes" id="btnYes" onclick="handleYes()" data-testid="btn-yes">YES</button>
                    <button class="btn-no" id="btnNo" onmouseenter="handleNoHover()" onclick="handleNoClick()" data-testid="btn-no">NO</button>
                </div>
                <div id="loveMessage" class="love-message" data-testid="love-message"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="navigateWithTransition('future.html')" data-testid="btn-back">
                    â† Kembali
                </button>
                <button class="btn-primary" onclick="navigateWithTransition('closing.html')" data-testid="btn-next">
                    Penutup â†’
                </button>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text" id="loadingText">Memuat...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <script src="assets/js/music.js"></script>
    <script src="assets/js/transition.js"></script>
    <script>
        window.addEventListener('load', function() {
            continueMusic();
        });

        const memories = [
            "Nama FB aneh ternyata jadi awal segalanya.",
            "Kamu nggak mau hubungan ini cuma di-HTS-in, dan itulah kenapa kita jadian.",
            "Aku grogi waktu pertama ketemu, tapi aku bertahan.",
            "Keluargamu menerima aku dengan hangat, dan itu berarti segalanya.",
            "22 Desember 2024, hari yang mengubah segalanya.",
            "Terima kasih sudah nerima aku apa adanya.",
            "Setiap hari bersamamu adalah berkah yang aku syukuri."
        ];

        function shuffleMemory() {
            const randomIndex = Math.floor(Math.random() * memories.length);
            const memoryDisplay = document.getElementById('memoryDisplay');
            memoryDisplay.textContent = memories[randomIndex];
            memoryDisplay.style.display = 'block';
            memoryDisplay.style.animation = 'none';
            setTimeout(() => {
                memoryDisplay.style.animation = 'fadeInUp 0.5s ease forwards';
            }, 10);
        }

        let noHoverCount = 0;
        let yesClickCount = 0;

        function handleNoHover() {
            const btnNo = document.getElementById('btnNo');
            if (noHoverCount < 2) {
                const randomX = Math.random() * 100 - 50;
                const randomY = Math.random() * 100 - 50;
                btnNo.style.transform = `translate(${randomX}px, ${randomY}px)`;
                noHoverCount++;
            } else {
                btnNo.textContent = 'YES';
                btnNo.classList.remove('btn-no');
                btnNo.classList.add('btn-yes');
                btnNo.style.transform = 'translate(0, 0)';
            }
        }

        function handleNoClick() {
            const btnNo = document.getElementById('btnNo');
            if (btnNo.textContent === 'YES') {
                handleYes();
            }
        }

        function handleYes() {
            yesClickCount++;
            const loveMessage = document.getElementById('loveMessage');
            
            if (yesClickCount === 1) {
                loveMessage.innerHTML = 'ğŸ’™ Aku juga sayang kamu!';
                createHearts();
            } else if (yesClickCount === 2) {
                loveMessage.innerHTML = 'ğŸ’™ğŸ’™ Aku sayang banget sama kamu!';
                createHearts();
            } else {
                loveMessage.innerHTML = 'ğŸ’™ğŸ’™ğŸ’™ Aku sangat sangat sayang kamu!';
                createHearts();
            }
            
            loveMessage.style.display = 'block';
            setTimeout(() => {
                loveMessage.style.opacity = '1';
            }, 100);
        }

        function createHearts() {
            const container = document.querySelector('.page-fun');
            for (let i = 0; i < 10; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = 'ğŸ’™';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 4000);
            }
        }
    </script>
</body>
</html>
